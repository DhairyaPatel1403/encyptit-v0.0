import streamlit as st
import torch
import numpy as np
import cv2
import matplotlib.pyplot as plt
import requests
import face_recognition
import json
from PIL import Image


with open('face_data.json', 'r') as file:
    data = json.load(file)

# Extract names and face encodings
known_face_names = [entry['name'] for entry in data['known_faces']]
known_face_encodings = [entry['encoding'] for entry in data['known_faces']]


# Assuming you have a list of known faces   
# known_face_encodings = [
#     [-0.13862623274326324, 0.06821059435606003, 0.07386137545108795, -0.0025994388852268457, -0.08810609579086304, -0.0254436694085598, -0.037478022277355194, -0.05042131245136261, 0.15918612480163574, -0.12016285210847855, 0.17795294523239136, -0.028099525719881058, -0.19590197503566742, -0.05354038253426552, 0.014729210175573826, 0.08141778409481049, -0.14828789234161377, -0.12261690199375153, -0.013340955600142479, -0.03772992268204689, 0.06649412959814072, 0.03783176466822624, 0.015197874046862125, 0.04789108783006668, -0.17957428097724915, -0.4098200500011444, -0.1183820515871048, -0.1984468549489975, -0.05403098836541176, -0.05857083201408386, -0.06830417364835739, 0.01747244969010353, -0.14334604144096375, 0.0032536741346120834, -0.03509904816746712, 0.07872048020362854, -0.09125122427940369, -0.05664883181452751, 0.18533065915107727, 0.013494670391082764, -0.15171000361442566, -0.04941774904727936, 0.0011436771601438522, 0.2513674795627594, 0.13096411526203156, 0.006350288633257151, 0.03239981830120087, 0.021951209753751755, 0.024827230721712112, -0.19605493545532227, 0.0009217951446771622, 0.16073261201381683, 0.13399548828601837, 0.08325666189193726, 0.0528794601559639, -0.130035862326622, 0.06730588525533676, -0.008588163182139397, -0.15771080553531647, 0.08248588442802429, 0.021560881286859512, -0.1734773963689804, -0.029378684237599373, 0.029811114072799683, 0.29334017634391785, 0.12593473494052887, -0.0866461843252182, -0.048521265387535095, 0.10823649913072586, -0.1783907115459442, -0.03291691467165947, 0.03229959309101105, -0.16003933548927307, -0.22932207584381104, -0.20307420194149017, 0.023316875100135803, 0.40958893299102783, 0.1524011194705963, -0.21283692121505737, 0.0032296068966388702, -0.08394186943769455, -0.018309369683265686, 0.12250076234340668, 0.12415432929992676, -0.08531206846237183, 0.03487367182970047, -0.13952244818210602, 0.0919262170791626, 0.21386432647705078, -0.06703750789165497, -0.04365146532654762, 0.16657418012619019, 0.008379314094781876, 0.0854749083518982, 0.0708710253238678, -0.07804707437753677, -0.022048916667699814, -0.035674795508384705, -0.0464119091629982, 0.05668719857931137, 0.057316310703754425, -0.1430296152830124, -0.06841814517974854, 0.046519793570041656, -0.14206840097904205, 0.09311839193105698, 0.037238508462905884, -0.08606716990470886, -0.04228632152080536, 0.01430815551429987, -0.16625931859016418, -0.04694313555955887, 0.17493543028831482, -0.19856835901737213, 0.21115538477897644, 0.1863211989402771, 0.004077591001987457, 0.21455973386764526, 0.030893748626112938, 0.062203653156757355, -0.07464016228914261, -0.03171335905790329, -0.1533859819173813, -0.03762974590063095, 0.06850851327180862, 0.006372531410306692, 0.10231351107358932, -0.012859944254159927],
# [-0.14246432483196259, 0.06770975887775421, 0.04110362008213997, -0.004661918617784977, -0.026139114052057266, -0.02261294424533844, -0.017071111127734184, -0.10057760030031204, 0.1272292137145996, -0.15140493214130402, 0.2730613648891449, -0.052443329244852066, -0.21193383634090424, -0.0429966077208519, -0.00516387727111578, 0.0962686762213707, -0.12249843776226044, -0.13774025440216064, -0.08142928779125214, -0.11251688748598099, 0.00705995736643672, -0.02938767708837986, -0.0023621362634003162, 0.085572749376297, -0.13130317628383636, -0.3332287073135376, -0.10549508035182953, -0.19182148575782776, -0.028988659381866455, -0.08864590525627136, -0.06278743594884872, 0.03018859401345253, -0.17442657053470612, -0.031378984451293945, -0.06060352176427841, 0.04123614728450775, -0.02809763140976429, -0.017240535467863083, 0.2113160490989685, -0.018416978418827057, -0.10703936219215393, -0.00788353756070137, 0.007206374779343605, 0.26774880290031433, 0.16049900650978088, 0.013956726528704166, 0.024388926103711128, -0.026726998388767242, 0.02209491841495037, -0.17002494633197784, 0.00813678652048111, 0.1175454631447792, 0.15652242302894592, 0.09224258363246918, -0.0027778707444667816, -0.14373324811458588, 0.03221159800887108, 0.022677641361951828, -0.10535760223865509, 0.054131366312503815, 0.03609314560890198, -0.16493208706378937, -0.029850875958800316, -0.011537084355950356, 0.3499613404273987, 0.08051978051662445, -0.09555105119943619, -0.05125097185373306, 0.17221319675445557, -0.1253797709941864, -0.02904009073972702, 0.04630758613348007, -0.14147473871707916, -0.19925369322299957, -0.19336102902889252, 0.11354421079158783, 0.4122714400291443, 0.15455657243728638, -0.19072462618350983, 0.0738426148891449, -0.1522020697593689, -0.03218663111329079, 0.07128272950649261, 0.07671831548213959, -0.0808941125869751, 0.014965131878852844, -0.09297539293766022, 0.07260605692863464, 0.21425849199295044, -0.015974920243024826, -0.0383918359875679, 0.15740473568439484, -0.029143858700990677, 0.05270805582404137, 0.09371128678321838, -0.04919883608818054, -0.043531354516744614, -0.01928584650158882, -0.07766835391521454, 0.04747330769896507, 0.0017414223402738571, -0.12233006954193115, -0.03738241270184517, 0.02198644168674946, -0.16187366843223572, 0.1125139445066452, -0.004988442175090313, -0.05112071335315704, -0.03280849754810333, 0.048960354179143906, -0.10021848976612091, -0.036172185093164444, 0.17012573778629303, -0.2706235647201538, 0.1808624565601349, 0.16394661366939545, 0.06823261082172394, 0.2138923853635788, 0.06363661587238312, 0.09760454297065735, -0.047846317291259766, -0.005883060395717621, -0.21018216013908386, -0.03274669870734215, 0.12841957807540894, -0.005147726275026798, 0.12484759092330933, 0.038774389773607254],
# [-0.16774412989616394, 0.06150886416435242, 0.06875035166740417, -0.009274615906178951, -0.05053054913878441, -0.0023117256350815296, -0.06090252846479416, -0.07479973882436752, 0.14400851726531982, -0.1250416785478592, 0.2537647485733032, -0.06091935932636261, -0.15043972432613373, -0.03169812634587288, -0.05111631751060486, 0.1267850548028946, -0.16769106686115265, -0.12421467900276184, -0.047679830342531204, -0.07005378603935242, 0.07064137607812881, 0.007671380881220102, -0.025811100378632545, 0.052645500749349594, -0.19855159521102905, -0.34611210227012634, -0.14560163021087646, -0.14368793368339539, -0.06845353543758392, -0.10371630638837814, -0.06323157250881195, -0.024421337991952896, -0.17498835921287537, -0.00404733419418335, -0.02009272202849388, 0.11301334202289581, -0.003937949426472187, -0.04032546654343605, 0.1460629254579544, -0.00437371339648962, -0.13677623867988586, 0.00863893423229456, 0.05594438314437866, 0.2643164098262787, 0.13750551640987396, 0.021173814311623573, 0.02567926049232483, 0.004538567736744881, 0.011544806882739067, -0.17545941472053528, 0.044503822922706604, 0.12269449234008789, 0.10712721943855286, 0.12365485727787018, -0.005766413174569607, -0.126656174659729, 0.017422638833522797, 0.09784670174121857, -0.08506949245929718, 0.04378008842468262, 0.04911162704229355, -0.12576478719711304, -0.018490280956029892, 0.030408000573515892, 0.2756159007549286, 0.1292022317647934, -0.11062631011009216, -0.12260663509368896, 0.12498448044061661, -0.14329597353935242, -0.047403957694768906, 0.014124633744359016, -0.1505775898694992, -0.20514169335365295, -0.27249377965927124, 0.09468748420476913, 0.4729635417461395, 0.11425105482339859, -0.19762393832206726, 0.043169908225536346, -0.11575490236282349, -0.0015464075841009617, 0.06221194192767143, 0.08843039721250534, -0.06368568539619446, 0.09133157134056091, -0.12376456707715988, 0.08044368028640747, 0.24190080165863037, -0.0004810914397239685, -0.02672899141907692, 0.15363238751888275, -0.0028865523636341095, 0.018146377056837082, 0.09462539851665497, 0.0005107539473101497, -0.012765122577548027, -0.040526363998651505, -0.06199615076184273, 0.04246433079242706, -0.007492439821362495, -0.11470881849527359, -0.0755603015422821, 0.06681159883737564, -0.19933533668518066, 0.14674527943134308, 0.0209026075899601, -0.08153995871543884, -0.07650290429592133, 0.07383590191602707, -0.10769686847925186, -0.03168260678648949, 0.174715057015419, -0.27397653460502625, 0.1367863416671753, 0.21499931812286377, 0.07149822264909744, 0.23336659371852875, 0.05385327339172363, 0.10854984074831009, -0.046573247760534286, 0.01894361712038517, -0.15944406390190125, -0.04988991841673851, 0.027577439323067665, 0.011929765343666077, 0.09623529762029648, 0.054108988493680954],
# [-0.14823924005031586, 0.08722548186779022, 0.04775131866335869, -0.0027962177991867065, -0.08053936809301376, 0.014570922590792179, -0.0792306587100029, -0.06825060397386551, 0.15274479985237122, -0.14277760684490204, 0.14613190293312073, -0.006193088833242655, -0.1603756844997406, -0.058463651686906815, -0.0034138779155910015, 0.10605929791927338, -0.18866540491580963, -0.09711486846208572, -0.008540667593479156, -0.05632517859339714, 0.055913496762514114, 0.030629629269242287, 0.024860801175236702, 0.1029490977525711, -0.1324828863143921, -0.3760356903076172, -0.1031564474105835, -0.14449156820774078, -0.07617785036563873, -0.06683538109064102, -0.10488258302211761, 0.04513781517744064, -0.1651395708322525, -0.0069226715713739395, -0.048399418592453, 0.1071091741323471, -0.04129107668995857, -0.015473820269107819, 0.13015347719192505, 0.037920158356428146, -0.10391607135534286, -0.05027080327272415, 0.02334645576775074, 0.2933032512664795, 0.19626961648464203, 0.015763506293296814, -0.028800303116440773, 0.0285255778580904, 0.05480744317173958, -0.20981422066688538, 0.03367253392934799, 0.1338929831981659, 0.08044055104255676, 0.0690290704369545, 0.05937580019235611, -0.1425173580646515, 0.02153434231877327, 0.03627029061317444, -0.09493739902973175, 0.06731341034173965, -0.004262336529791355, -0.1432453989982605, -0.019327661022543907, -0.007560469675809145, 0.29978084564208984, 0.13097451627254486, -0.09873276948928833, -0.07948710024356842, 0.08428478240966797, -0.13107870519161224, -0.0307818241417408, 0.026824597269296646, -0.15473049879074097, -0.2094917595386505, -0.2452821135520935, 0.057089485228061676, 0.4184269905090332, 0.1740364283323288, -0.19856977462768555, -0.0021537085995078087, -0.10712290555238724, -0.053925521671772, 0.13014556467533112, 0.12580980360507965, -0.05063275247812271, 0.028084460645914078, -0.12751078605651855, 0.0952431857585907, 0.16531586647033691, -0.0018498776480555534, -0.06038627400994301, 0.21317319571971893, -0.007729369215667248, 0.05545412749052048, 0.05195627734065056, -0.042953308671712875, -0.052773792296648026, -0.006094308570027351, -0.14897924661636353, -0.00805684830993414, 0.01637628860771656, -0.10430163890123367, -0.06350306421518326, 0.07696337252855301, -0.14977672696113586, 0.06506607681512833, 0.04877396672964096, -0.04487837105989456, -0.03197275474667549, 0.010464769788086414, -0.22647106647491455, -0.0487620048224926, 0.16336965560913086, -0.23378005623817444, 0.13089247047901154, 0.1689218282699585, 0.05842892825603485, 0.21295490860939026, 0.06137459725141525, 0.07574158161878586, -0.039539605379104614, -0.051686543971300125, -0.14123764634132385, 0.013534271158277988, 0.10295742005109787, 0.014649786055088043, 0.0770479217171669, 0.015810571610927582],
# [-0.1497281789779663, 0.05874793231487274, 0.05059170722961426, -0.0037768979091197252, -0.04709708318114281, -0.01831335946917534, 0.012053299695253372, -0.04438147321343422, 0.13474254310131073, -0.0831935703754425, 0.18182778358459473, -0.0456998385488987, -0.2124028354883194, -0.08762192726135254, 0.016490209847688675, 0.10303615033626556, -0.14379805326461792, -0.10907244682312012, -0.04789998382329941, -0.08302301168441772, 0.034086715430021286, 0.03738810122013092, 0.02727542817592621, 0.1277310699224472, -0.14110949635505676, -0.39483582973480225, -0.0932156890630722, -0.18649859726428986, -0.023691538721323013, -0.05433975160121918, -0.03958840295672417, 0.03133828938007355, -0.16448721289634705, 0.03931976854801178, -0.060150858014822006, 0.030051633715629578, -0.05164412409067154, -0.06329508125782013, 0.20580382645130157, 0.01742098107933998, -0.11948986351490021, -0.12791281938552856, -0.010535374283790588, 0.26501789689064026, 0.18639139831066132, -0.03887912258505821, 0.0795687735080719, 0.023415902629494667, 0.006657509598881006, -0.19032664597034454, -0.006702659651637077, 0.15152235329151154, 0.1355898678302765, 0.052604563534259796, -0.006106110289692879, -0.15161827206611633, -0.0005606953054666519, -0.0016353782266378403, -0.13900458812713623, 0.0632254108786583, -0.007917112670838833, -0.13794730603694916, -0.0765538290143013, 0.023933835327625275, 0.30955663323402405, 0.10176370292901993, -0.11825700849294662, -0.09497091174125671, 0.1796286255121231, -0.2056550532579422, 0.001755387056618929, 0.04587506875395775, -0.16467083990573883, -0.2220769077539444, -0.24569572508335114, 0.05590946972370148, 0.39660975337028503, 0.1444462090730667, -0.19043409824371338, 0.0278768390417099, -0.16415387392044067, 0.018647782504558563, 0.08457795530557632, 0.10379723459482193, -0.11660051345825195, 0.04325990378856659, -0.1316910684108734, 0.11238976567983627, 0.18880446255207062, -0.04572737216949463, -0.07630400359630585, 0.16396546363830566, 0.011738915927708149, 0.024850867688655853, 0.06932029128074646, -0.05414672940969467, 0.020652685314416885, -0.010187959298491478, -0.04621099308133125, 0.08921375870704651, 0.047064464539289474, -0.13338814675807953, -0.010073138400912285, 0.047351669520139694, -0.16033048927783966, 0.11269654333591461, 0.04379064962267876, -0.07303150743246078, -0.03228163719177246, 0.020497918128967285, -0.22175337374210358, -0.05968474596738815, 0.19695860147476196, -0.2249058336019516, 0.1591838300228119, 0.16904200613498688, 0.043396156281232834, 0.22587773203849792, 0.035910677164793015, 0.1216018870472908, -0.05855019390583038, -0.04877854883670807, -0.13134030997753143, 0.006776516791433096, 0.09166501462459564, 0.0032491926103830338, 0.09700863063335419, 0.015711184591054916],
# [-0.1734706312417984, 0.016902677714824677, 0.0576944462954998, -0.021548951044678688, -0.007337802089750767, -0.02337854914367199, 0.03660561144351959, -0.032781075686216354, 0.1571834534406662, -0.0803757905960083, 0.21220406889915466, -0.03286881744861603, -0.21098874509334564, -0.09686080366373062, 0.024022642523050308, 0.08108194172382355, -0.11547938734292984, -0.09300399571657181, -0.058798082172870636, -0.08034571260213852, 0.010089913383126259, 0.04402690753340721, 0.013388887979090214, 0.1201535239815712, -0.1782303899526596, -0.37003934383392334, -0.07238088548183441, -0.1941882073879242, -0.06802476942539215, -0.033096641302108765, -0.03899843245744705, 0.08670033514499664, -0.19008919596672058, -0.001831626519560814, -0.048949234187603, 0.08262284845113754, -0.012673077173531055, -0.0047292993403971195, 0.1959555596113205, 0.03278178349137306, -0.114523746073246, -0.12545053660869598, 0.0009459517896175385, 0.29526951909065247, 0.19633539021015167, -0.04404379054903984, 0.04303441941738129, 0.0399518720805645, 0.024945801123976707, -0.21856579184532166, -0.023827048018574715, 0.12308249622583389, 0.12492548674345016, 0.05746959149837494, -0.0004690345376729965, -0.1407325267791748, 0.03903523460030556, 0.007125977426767349, -0.15223802626132965, 0.03449239954352379, -0.010474690236151218, -0.15429382026195526, -0.052263207733631134, 0.05334848165512085, 0.3270910680294037, 0.06560103595256805, -0.11806157976388931, -0.06320631504058838, 0.16427631676197052, -0.17717307806015015, 0.017588958144187927, 0.06702666729688644, -0.170034721493721, -0.21054889261722565, -0.2801702916622162, 0.08471819758415222, 0.40844982862472534, 0.14320363104343414, -0.1910608559846878, 0.061991509050130844, -0.1957324743270874, 0.01073606126010418, 0.10265643894672394, 0.0703229159116745, -0.08016715198755264, 0.057266995310783386, -0.13009731471538544, 0.10109958797693253, 0.2008371502161026, -0.006600219756364822, -0.05670415982604027, 0.1662830114364624, 0.01143630314618349, 0.02024003118276596, 0.08170224726200104, -0.05590159073472023, 0.009750204160809517, -0.0266907699406147, -0.08691380172967911, 0.08477140963077545, 0.023365948349237442, -0.10914217680692673, 0.007331866770982742, 0.05954916402697563, -0.20418378710746765, 0.11423094570636749, 0.04758060723543167, -0.08163825422525406, -0.023794231936335564, 0.006873420439660549, -0.17864584922790527, -0.055647339671850204, 0.17326372861862183, -0.2548234462738037, 0.13039909303188324, 0.14859850704669952, 0.047733839601278305, 0.22816261649131775, 0.02991289086639881, 0.07897171378135681, -0.0774761512875557, -0.01627672091126442, -0.13474558293819427, 0.007990777492523193, 0.10210710018873215, -0.0009857462719082832, 0.12081564962863922, 0.015605319291353226],
# [-0.16204193234443665, 0.05949048697948456, 0.0836026668548584, -0.002294180216267705, -0.023324288427829742, -0.050159893929958344, 0.030458994209766388, -0.02366727776825428, 0.15439321100711823, -0.09130162000656128, 0.18647731840610504, -0.019739322364330292, -0.1916244775056839, -0.07600806653499603, 0.07238305360078812, 0.0905509740114212, -0.14426970481872559, -0.091534323990345, -0.06090277433395386, -0.07932093739509583, 0.003838161937892437, 0.04269939661026001, 0.019359059631824493, 0.11736153066158295, -0.14119012653827667, -0.3892592191696167, -0.07954348623752594, -0.1619807332754135, -0.03303714096546173, -0.0393950529396534, -0.029109692201018333, 0.05976094305515289, -0.179786816239357, 0.01789013296365738, -0.06754732131958008, 0.04351302981376648, -0.018426502123475075, -0.051843561232089996, 0.1891462355852127, 0.028271395713090897, -0.12058305740356445, -0.12657682597637177, -0.015816353261470795, 0.2658522427082062, 0.16806474328041077, -0.05140135437250137, 0.07160566747188568, 0.03483425825834274, 0.038159098476171494, -0.1907118260860443, -0.010396197438240051, 0.11504966765642166, 0.13531407713890076, 0.05810961872339249, -0.0005356725305318832, -0.15515018999576569, 0.02740136906504631, -0.0014528166502714157, -0.14867143332958221, 0.05566449463367462, -0.011804359965026379, -0.14684274792671204, -0.0558927021920681, 0.03821876645088196, 0.31177300214767456, 0.0899047702550888, -0.09791749715805054, -0.08169396221637726, 0.15500034391880035, -0.16793711483478546, 0.015672756358981133, 0.07554879784584045, -0.15916548669338226, -0.1977100819349289, -0.25509151816368103, 0.0636337548494339, 0.3967832326889038, 0.11614547669887543, -0.17864304780960083, 0.02419211156666279, -0.19602720439434052, -0.0085226409137249, 0.07622460275888443, 0.102610282599926, -0.09490855038166046, 0.03146868944168091, -0.12164472043514252, 0.12071424722671509, 0.2126365602016449, -0.011333810165524483, -0.07398302853107452, 0.1652582883834839, 0.023771703243255615, 0.0245041586458683, 0.03663063049316406, -0.07050144672393799, 0.02526926063001156, -0.009867306798696518, -0.03195617347955704, 0.08565115928649902, 0.03650148957967758, -0.1305491030216217, -0.028194457292556763, 0.05032523348927498, -0.21655170619487762, 0.11808345466852188, 0.0684056431055069, -0.059390533715486526, -0.0005254857242107391, 0.038023870438337326, -0.1863037794828415, -0.0629054382443428, 0.16579042375087738, -0.2521514296531677, 0.15186293423175812, 0.17088322341442108, 0.03347834199666977, 0.22435423731803894, -0.02255808562040329, 0.10576912760734558, -0.06439714133739471, -0.04137267917394638, -0.12054474651813507, 0.015131635591387749, 0.09532772749662399, 0.0077623045071959496, 0.08763518929481506, 0.030141495168209076],
# ]
# known_face_names = ["Dhairya", "Dhairya", "Dhairya", "Dhairya", "Dhairya", "Dhairya", "Dhairya"]

# known_face_encodings=[]
# known_face_names=[]




def memorize_face(name, uploaded_image):
    st.write("Entering memorization...")
    if uploaded_image is not None:
        # Convert the PIL image to a NumPy array
        img_array = face_recognition.load_image_file(uploaded_image)
        img = Image.fromarray(img_array)
        
        face_encodings = face_recognition.face_encodings(img_array)


        if len(face_encodings) > 0:
            encoding = face_encodings[0]
            # Assuming known_face_encodings and known_face_names are global lists
            known_face_encodings.append(encoding)
            known_face_names.append(name)
            st.success(f"Face memorized for {name}")
        else:
            st.warning("No face found in the uploaded image.")
    else:
        st.warning("Please upload an image.")


def recognize_face(face_encoding, img):
    matches = face_recognition.compare_faces(known_face_encodings, face_encoding)
    name = "Unknown"

    if True in matches:
        first_match_index = matches.index(True)
        name = known_face_names[first_match_index]
    
    else:
        st.warning("The face is not recognized, if you want it to identify as a new person, write their name.")
        given_name = st.text_input("Write the name")

        if given_name != "":
            name=given_name

            face_encodings = face_recognition.face_encodings(img)

            if len(face_encodings) > 0:
                encoding = face_encodings[0]
                new_entry = {'name': given_name, 'encoding': encoding.tolist()}
                data['known_faces'].append(new_entry)

                # Write the updated data back to the JSON file
                with open('face_data.json', 'w') as file:
                    json.dump(data, file, indent=2)

    return name

def detect():

        img_file_buffer = st.camera_input("Take a picture.")


        if img_file_buffer is not None:
            bytes_data = img_file_buffer.read()
            cv2_img = cv2.imdecode(np.frombuffer(bytes_data, np.uint8), cv2.IMREAD_COLOR)

            # gray_image = cv2.cvtColor(cv2_img, cv2.COLOR_BGR2GRAY)

            face_locations = face_recognition.face_locations(cv2_img)
            face_encodings = face_recognition.face_encodings(cv2_img, face_locations) 

            name = ""

            for (top, right, bottom, left), face_encoding in zip(face_locations, face_encodings):
                name = recognize_face(face_encoding, cv2_img)
                cv2.rectangle(cv2_img, (left, top), (right, bottom), (0, 255, 0), 4)
                cv2.putText(cv2_img, name, (left, top - 10), cv2.FONT_HERSHEY_SIMPLEX, 0.9, (0, 255, 0), 2)
                st.info(name)

            img_rgb = cv2.cvtColor(cv2_img, cv2.COLOR_BGR2RGB)
            st.image(img_rgb, use_column_width=True, channels="RGB", caption="Face Recognition")
            if name=="":
                st.warning("No face recognized")
            else:
                st.session_state['face_name'] = name
                return name




# memorize_face("Dhairya", "my_img.jpg")
# memorize_face("Dhairya", "my_img2.jpg")
# memorize_face("Dhairya", "my_img3.jpg")
# memorize_face("Dhairya", "my_img4.jpg")
# memorize_face("Dhairya", "my_img5.jpg")
# memorize_face("Dhairya", "my_img6.jpg")
# memorize_face("Dhairya", "my_img7.jpg")


# def main():

detect()